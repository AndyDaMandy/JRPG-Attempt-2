<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Textia</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script src="classes.js" defer></script>
    <script src="globalvars.js" defer></script>
    <script src="menufunctions.js" defer></script>
    <script src="gamestate.js" defer></script>
    <script src="battle.js" defer></script>
       <!-- simple storage --> 
    <script src="https://cdn.jsdelivr.net/npm/simplestorage.js@0.2.1/simpleStorage.min.js" defer></script>
  </head>
  <body onload="check()">
    <header>
    <h1>Textia: a World without Images</h1>
    <p><em>To play, click the buttons below:</em></p>
    </header>
    <!-- Starts Game -->
<div id="begin">
  <h2>Game Start</h2>
  <p><em>Your adventure begins with two friends, Marie and Ando</em></p>
  <button id="start-game" onClick="startGame()">New Game, Click Here</button>
  <button id="continue" onClick="load()" hidden>Continue</button>
</div>
<!-- Menu System below -->
<div class="well" id="main-menu" hidden>
  <button class="small-btn" id="open-menu" onclick="openMenu()" hidden>Menu</button>
  <button class="small-btn" id="save-button" hidden onclick="save()">Save</button>
  <button class="small-btn" id="equip-button" hidden onclick="equip()">Equip</button>
 <button class="small-btn" id="swap-team" hidden onclick="swapChars()">Swap Team</button>
  <button class="small-btn" id="formation-button" hidden onclick="partyFormation()">Formation</button>
  <button class="small-btn" id="inventory-button" hidden onclick="showInventory()">Inventory</button>
  <button class="small-btn" id="show-stats" onclick="showStats()" hidden>Party Status</button>
  <button class="small-btn" id="tutorial-button" onClick="openTutorial()" hidden>Tutorial</button>
  <button class="small-btn" id="close-menu" onclick="closeMenu()" hidden>Close Menu</button>
</div>
<div class="well" id="save-menu" hidden>
  <p>You saved your game!</p>
</div>
  <div class="well" id="equip-screen" hidden>
      <h5>Party:</h5>
      <div id="equipped-text"></div>
      <div id="equip-party"></div>
      <h5>Equipment:</h5>
      <p><em>Click a weapon to select your character, then click on the character to swap your weapon.</em></p>
      <div id="equipment"></div>
  </div>
<div class="well" id="inventory-menu" hidden>
  <h3>Inventory</h3>
  <ul id="inventory-items"></ul>
</div>
<div class="well" id="stats-menu" hidden>
  <h3 id="party-status">Your current party: </h3>
  <p><em>Click a character name to view their stats.</em></p>
  <div id="party-btns"></div>
  <h4 id="line-1"></h4>
  <ul id="menu-items"></ul>
  </div>
<div class="well" id="swap-menu" hidden>
  <h3>Swap Team:</h3>
  <p><em>Which reserve member will you swap into your party?</em></p>
  <div id="reserve-chars"></div>
  <div id="main-chars"></div>  
</div>
<div class="well" id="formation-menu" hidden>
  <h3>Formation:</h3>
  <p><em>Click to establish your party's formation. Once you've selected all your characters hit "Finish Selection" or your party will go back to the previous order</em></p>
  <div id="party-loc"></div>
  <div id="print-party"></div>
  <div id="select-party"></div> 
</div>
<div class="well" id="tutorial-menu" hidden>
  <h3>Tutorial</h3>
  <p><em>Welcome to the tutorial menu! Here are some explanations of mechanics!</em></p>
  <h4>Menu</h4>
  <p>As you've seen, there is a menu. It lets you access equipment, inventory, character status, and lets you set the formation/party you'll use going forward.</p>
  <p>You can save if you hit the save button. Save uses local storage, so refreshing browser data will delete your save file.</p>
  <p>Hitting close menu will close the menu and whatever the menu is displaying. Try closing this tutorial!</p>
  <h4>Battle</h4>
  <p>You'll encounter enemies on your journey. Once you find them you will enter a battle</p>
  <p>Battles are won by lowering the enemy hit points to 0. You can't see their hit points, so be careful!</p>
  <p>Turns follow an order: Party Member 1 - > Party Member 2 -> Party Member 3 -> Enemy Turn -> Repeat</p>
  <p>The key to battle is to hit elemental weaknesses and to avoid having all of your team incapacitated.</p>
  <h4>Stats</h4>
  <p>Each character has their own stats. Attacks are split into physical attacks and magical attacks. Physical attacks hit Physical Defense, Magical hits Magical Defense. Enemies have affinities for physical and magical as well, so be sure pay attention to how much damage you do with one or the other.</p>
  <p>HP is your hit points, if you lose them all that character will be incapacitated! You can revive an incapacitated character with a Revival Potion</p>
  <p>MP is your magic points. Skills and spells use magic points. If you don't have enough MP you will not be able to use a skill</p>
  <p><strong>Don't be afraid to use MP, you recover HP/MP after each battle!</strong></p>
  <p>Exp referes to experience points, you'll gain exp by defeating enemies. Gaining enough will allow you to level up!</p>
  <p>Leveling up will raise all stats and if you hit certain levels you'll gain new skills/support skills</p>
  <p>Luck determines several luck-based elements.</p>
  <h4>Skills</h4>
  <p>Each character has a set of "skills" and "support skills"</p>
  <p>Skills target enemies and usually do damage.</p>
  <p>Support skills will usually support allies in some capacity. Healing, buffing, etc.</p>
  <p>While skills and support skills fall under the Skills category, there are some other major differences</p>
  <p>Some skills are "physical" and make use of the character's physical stats. Other skills are "magical" aka spells and make use of the magic stat.</p>
  <p>Skills can have elemental attributes as well, doing extra damage based on the elements. See below:</p>
  <h4>Elements</h4>
  <p>There are 4 elements in this world: <strong>Fire, Ice, Water, Thunder.</strong></p>
  <p><strong>Fire and Ice are opposites and Water and Thunder are opposites.</strong> If an enemy has a Fire affinity, that means Ice will do extra damage. If the enemy has an Ice affinity, Fire will do extra damage. Water beats Thunder and Thunder beats Water.</p>
  <p>Water does not do extra damage to Fire or Ice, Ice does not do extra damage to Thunder or Fire, for example.</p>
  <p>Not all enemies have elemental affinities, thus an elemental attack won't do extra damage on them.</p>
  <h4>Weapons</h4>
  <p>Each character uses their own unique weapons. You can't equip weapons that your character won't use.</p>
  <p>If you find a weapon and you can't equip it, perhaps you haven't met the character that can use it?</p>
  <h4>Party</h4>
  <p>You'll encounter several characters in your journey, they can join your "party"</p>
  <p>Your party is split into your "current party" and your "reseve party". Only characters in your current party can battle. All other charaters will remain in your reserve.</p>
  <p><strong>Your current party has a limit of 3 characters, you can have no more</strong></p>
  <p>You can't lower your party size once it's at 3, if you're a loner then you can use 2, but I wouldn't recommend it!</p>
  <button onclick="closeMenu()">Close Tutorial Screen</button>
</div>
<!--Gameplay Elements Below -->
  <button id="shop-button" onclick="openShop()" hidden>Shop</button>
<div class="well" id="shop" hidden>
  <button id="close-shop" onclick="closeShop()">Close Shop</button>
  <p>Your money:</p>
  <p id="money"></p>
  <h2>Shop</h2>
  <p>We sell all sorts of items here! When you purchase something your inventory will automatically open. To close, hit "close menu"</p>
  <p id="purchased"></p>
  <h2 id="broke" hidden>Not enough money!</h2>
  <div id="shop-items"></div>
<!-- My idea for the shop is to have an array of buttons created containing the items.. It's kind of bold, but we'll see!-->
</div>
<!-- battles go here -->
<div class="well" id="battle-mode" hidden>
  <h2>Battle!</h2>
  <div id="enemies">
    <div id="enemy-sel"></div>
  </div>
  <div id="party">     
  </div>
  <ul id="p-stats"></ul>
  <div id="calc">
  </div>
  <div id="info"></div>
  <div id="commands">
    <div id="p-com"></div>
    <div id="skill-slot"></div>
    <div id="item-slot"></div>
  </div> 
  <div id="end"></div>
</div>
<!-- Adventure elements below -->
<div class="well" id="adv-mode" hidden>
  <div id="town-1" hidden>
    <!-- state = 0 -->
    <h2>Amaryllis Town</h2>
    <p>Shaman: "Hello Ando and Marie, today is the day of your pilgrimage."</p>
    <p>"Our town needs a new crystal and you both are going to the Crystal Lake to gather one for us"</p>
    <p>"Without it we cannot protect ourselves from monsters much longer."</p>
    <p>"To access the menu, click the "Menu" button above. You can check your items, party, skills, etc."</p>
    <p>"If you click the tutorial button you can learn a lot about how to survive. Don't go into the wilderness unprepared! You can access it at any time, so if you're ever confused you can open it again."</p>
    <p>"If you'd like to move on, click below, or click the shop button above"</p>
    <button onclick="move(1);">Enter Forest</button>
    </div>
  <div id="forest-1" hidden>
    <div id="forest-1-1">
      <!-- state = 1 -->
      <h2>The Forest</h2>   
      <p>You've found yourself in a mysterious forest. It's full of danger at every turn.</p>
      <p>You're worried the danger might be too high, maybe you should head back to town?</p>
      <button onclick="move(0)">Back to Town</button>
      <button onclick="move(2)">To the Large Tree</button>
      </div>
    <div id="forest-1-2" hidden>
      <!-- state = 2 -->
      <h2>The Large Tree</h2>
      <p>You've found a large tree!</p>
      <p>There are enemies near it!</p>
      <p>Will you fight?</p>
      <button onclick="move(1)">Go Back</button>
      <button onclick="battle([goblin, potatoThief, goblin]); statePost = 3;">Fight</button>
      </div>
    <div id="forest-1-3" hidden>
      <!-- state = 3 -->
      <h2>The Large Tree - 2</h2>
      <p>After defeating the enemies you can now approach the tree.</p>
      <p>there you find a treasure chest.</p>
      <p>Will you open it?</p>
      <button id="chest-1" onclick="openChest(potion, this.id)">Open Chest</button>
      <button onclick="move(4)">Move Forward</button>
      </div>
    <div id="forest-1-4" hidden>
      <!-- state = 4 -->
      <h2>The Light in the Darkness</h2>
      <p>Despite the darkness, you glimpse a small light coming through the trees.</p>
      <p>You see an enemy ahead, it looks tough. There are two chests on the ground nearby, will you open it?</p>
      <p>You have no choice but to move ahead.</p>
      <button id="chest-2" onclick="openChest(potion, this.id)">Open Chest</button>
      <button id="chest-3" onclick="openChest(magicPotion, this.id)">Open Chest</button>
      <button onclick="battle([livingTree]); statePost = 5;">Move Forward</button>     
      </div>
    <div id="forest-1-5" hidden>
      <!-- state = 5 -->
      <h2>The End of the Forest</h2>
      <p>You've defeated living tree!</p>
      <p>The living tree dropped a chest, Will you open it?</p>
      <p>Now that the exit is ahead, it's time for you to move on</p>
      <button id="chest-4" onclick="openChest(ironSword, this.id)">Open Chest</button>
      <button onclick="move(6)">Move Foward</button>
    </div>
  </div>
  <div id="town-2" hidden>
    <div id="town-2-1">
      <!-- state = 6 -->
      <h2>Magnolia Town</h2>
      <p>Here you see plenty of townspeople. Further into town you think you see a shop. Perhaps you should get closer?</p>
      <p>You also see a man handing out what appears to be a newspaper</p>
      <p>Will you take one?</p>
      <button id="newspaper-1" onclick="alertOne()">Read Paper</button>
      <button onclick="move(7)">Go to Chapel</button>
      <button onclick="move(8)">Go further into town</button>
    </div>
    <div id="town-2-chapel">
      <!-- state = 7 -->
      <h2>Chapel</h2>
      <p>You see a shaman, you approach him.</p>
      <p>"Hello there! I see you're adventurers! The enemies out there are powerful, it'd be in your best interest to prepare yourself"</p>
      <p>"I can summon a creature for you to practice on"</p>
      <p>"While there's no money in this, I can keep summoning creatures until you feel comfortable"</p>
      <p>"I've held enough funerals for adventurers....I want to help."</p>
      <button onclick="move(6)">Go Back</button>
      <button onclick="battle([familiar]); statePost = 7;">Summon Familar</button>
    </div>
    <div id="town-2-2">
      <!-- state = 8 -->
      <h2>Magnolia Town - Town Square</h2>
      <p>You see a shop nearby, you think it might be good to stock up on items.</p>
      <p>There's a fountain ahead, you realize you've never seen so much water in one place</p>
      <p><em>Ando and Marie take a moment to reflect on how far they've come.</em></p>
      <button onclick="move(6)">Go Back</button>
      <button onclick="move(9)">Go to end of Town</button>
    </div>
    <div id="town-2-3">
      <!-- state = 9 -->
      <h2>The end of Magnolia Town</h2>
      <p>You've made it to the end of Magonlia Town.</p>
      <p><em>Marie and Ando see a young woman with a backpack and a bow coming their way</em></p>
      <p>The woman: "I see you two appear to be on a pilgrimage. My name's Julie, I'm on a pilgrimage for Solar Town"</p>
      <p>Julie: "Maybe we should team up? It'd be safer if we traveled together."</p>
      <p>Will you let Julie join you? You may not see her again if your paths diverge here.</p>
      <button id="add-julie" onclick="addJulie(this.id)">Let Julie Join</button>
      <button onclick="move(8)">Go Back</button>
      <button onclick="move(10)">Move Forward</button>
    </div>
  </div>
  <div id="plains-1" hidden>
    <div id="plains-1-1">
      <!-- state = 10 -->
      <h2>Great Maka Plains</h2>
      <p>After leaving town you see a great plain that extends as far as the eye can see.</p>
      <p>The wind makes little waves out of the flowing grass.</p>
      <p>You see small creatures running around in the distance.</p>
      <p>You can still go back to town, but if you go further you know you will not be able to return.</p>
      <p>A group of bats are coming your way, to go forward you must fight!</p>
      <button onclick="move(9)">Go Back</button>
      <button onclick="battle([bat, bat, bat]); statePost = 11;">Fight!</button>
    </div>
    <div id="plains-1-2">
      <!-- state = 11 -->
      <h2>Great Maka Plains - Further in</h2>
      <p>You see what appears to be bison in the distance</p>
      <p>They're glowing yellow, certainly not the kind of bison you're used to.</p>
      <p>They spot you! They're attacking!</p>
      <button onclick="battle([sparkBison, sparkBison, sparkBison]); statePost = 12;">Fight!</button>
    </div>
    <div id="plains-1-3">
      <!-- state = 12 -->
      <h2>Great Maka Plains - Watering Hole</h2>
      <p>You see a beautiful watering hole.</p>
      <p>Small animals are drinking from it.</p>
      <p>You see a few chests nearby labeled "supplies for pilgrimages"</p>
      <p>Will you take a few supplies out of the chests?</p>
      <button id="chest-5" onclick="openChest(highPotion, this.id)">Open Chest</button>
      <button id="chest-6" onclick="openChest(revivalPotion, this.id)">Open Chest</button>
      <button onclick="move(13)">Go Forward</button>
    </div>
    <div id="plains-1-4">
      <!-- state = 13 -->
      <h2>Great Maka Plains - Past the Watering Hole</h2>
      <p>You continue into the plains.</p>
      <p>Again you see a group of enemies, you have no choice but to fight.</p>
      <button onclick="battle([bat, redGoblin, sparkBison]); statePost = 14;">Fight!</button>
    </div>
    <div id="plains-1-5">
      <!-- state = 14 -->
      <h2>Great Maka Plains - Diverging Paths</h2>
      <p>You see two paths ahead.</p>
      <p>You sense strong enemies ahead of both paths.</p>
      <p>To the left you see what appears to be fire. Perhaps something has set the grass on fire?</p>
      <p>To the right you see what appears to be a snow storm.</p>
      <p>Both paths appear menacing, but you've made it too far to turn back now.</p>
      <button onclick="move(15)">Go Left</button>
      <button onclick="move(16)">Go Right</button>
    </div>
    <div id="plains-1-left">
      <!-- state = 15 -->
      <h2>Great Maka Plains - Flaming Field</h2>
      <p>The area around you is engulfed in fire.</p>
      <p>The blessing of the Goddess is pushing away the flames, allowing you to move forward.</p>
      <p>You see what's causing the fire ahead...</p>
      <p>It appears to be a large fox engulfed in flames.</p>
      <p>To move aheady you must fight.</p>
      <button onclick="battle([flareFox]); statePost = 17;">Fight!</button>
    </div>
    <div id="plains-1-right">
      <!-- state = 16 -->
      <h2>Great Maka Plains - Frozen Field</h2>
      <p>The area around you has frozen over entirely.</p>
      <p>Wind and snow storm around you.</p>
      <p>It looks more like a tundra now than a plain</p>
      <p>You see ahead what's causing the storm.</p>
      <p>It appears to be a large Leopard, with ice shards coming out of it</p>
      <button onclick="battle([iceLeopard]); statePost = 18;">Fight!</button>
    </div>
    <div id="plains-1-left-2">
      <!-- state = 17 -->
      <h2>Great Maka Plains - Beyond the Flaming Field</h2>
      <p>You defeated the Flare Fox!</p>
      <p><em>Marie and Ando exchange sighs of relief.</em></p>
      <p>You found a treasure chest, will you open it?</p>
      <button id="chest-7" onclick="openChest(flameSword, this.id)">Open Chest</button>
      <button onclick="move(19)">Move Forward</button>
    </div>
    <div id="plains-1-right-2">
    <!-- state - 18 -->
      <h2>Great Maka Plains - Beyond the Frozen Field</h2>
      <p>You found a treasure chest, will you open it?</p>
      <button id="chest-8" onclick="openChest(iceStaff, this.id)">Open Chest</button>
      <button onclick="move(19)">Move Forward</button>
    </div>
    <div id="plains-1-6">
      <!-- state = 19 -->
      <h2>End of the Great Maka Plains</h2>
      <p>You've made it through to the end of the Plains</p>
      <p>You see a city in the distancce, larger than anything you've seen before!</p>
      <button onclick="move(20)">Go Forward</button>
    </div>
  </div>
  <div id="town-3" hidden>
    <div id="town-3-s">
      <!-- state = 20 -->
      <h2>Aster City - South</h2>
      <p>You've arrived in Aster City!</p>
      <p>You see tall buildings everywhere and the road is sprawling with people.</p>
      <p>You think you could easily get lost here.</p>
      <button onclick="move(21)">Go Forward</button>
    </div>
    <div id="town-3-c">
      <!-- state = 21 -->
      <h2>Aster City - Center</h2>
      <p>At the heart of the city is a large statue.</p>
      <p>The statue is of a man with a sword and shield, the original pilgrim, Red the Great. He first found the crystals, discovered their power and created a safe future for mankind.</p>
      <p>There's a plaque below him, maybe you should read it?</p>
      <p>There are several ways you can go, back South, North, East or West.</p>
      <button>South</button>
      <button>North</button>
      <button>East</button>
      <button>West</button>
      <button>Read Plaque</button>

    </div>
    <div id="town-3-l">
      <!-- state = 22 -->
      <h2>Aster City - West</h2>
    </div>
    <div id="town-3-l-2">
      <!-- state = 23 -->
      <h2>Aster City - West 2</h2>
    </div>
    <div id="town-3-r">
      <!-- state = 24 -->
      <h2>Aster City - East</h2>
    </div>
    <div id="town-3-r-2">
      <!-- state = 25 -->
      <h2>Aster City - East 2</h2>
    </div>
    <div id="town-3-r-3">
      <!-- state = 26 -->
      <h2>Aster City - East 3</h2>
    </div>
    <div id="town-3-n">
      <!-- state = 27 -->
      <h2>Aster City - North</h2>
    </div>
    <div id="town-3-n-2">
      <!-- state = 28 -->
      <h2>Aster City - Docks</h2>
    </div>
  </div>
  <div id="boat-1" hidden></div>
  <div id="mountain-1" hidden></div>
<!-- Adv mode Div -->
</div>
  </body>
</html>